<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width" />
    <meta name="author" content="www.lzqcode.com" />
    <title>用户主页</title>
    <link rel="stylesheet" href="/Blog/static/userSide/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/Blog/static/userSide/layui/css/layui.css" />
    <link rel="stylesheet" href="/Blog/static/userSide/css/master.css" />
    <link rel="stylesheet" href="/Blog/static/userSide/css/gloable.css" />
    <link rel="stylesheet" href="/Blog/static/userSide/css/nprogress.css" />
    <link rel="stylesheet" href="/Blog/static/userSide/css/blog.css" />


    <!--    找到的用户中心-->
    <link type="text/css" rel="stylesheet" href="/Blog/static/userSide/css/core.css">
    <link type="text/css" rel="stylesheet" href="/Blog/static/userSide/css/icon.css">
    <link type="text/css" rel="stylesheet" href="/Blog/static/userSide/css/home.css">

</head>
<body>
<div class="header">
</div>
<header class="gird-header">
    <div class="header-fixed">
        <div class="header-inner">
            <a href="javascript:void(0)" class="header-logo" id="logo">Mr.liu</a>
            <nav class="nav" id="nav">
                <ul>
                    <li><a href="/Blog">首页</a></li>
                    <li><a href="/Blog/homepage">博客</a></li>
                    <li><a href="/Blog/download">资源</a></li>
                    <li><a href="diary.html">日记</a></li>
                    <li><a href="link.html">友链</a></li>
                    <li><a href="/Blog/write">撰写</a></li>
                </ul>
            </nav>
            <a href="#" class="blog-user">
                <i class="fa fa-qq"></i>
            </a>
            <a class="phone-menu">
                <i></i>
                <i></i>
                <i></i>
            </a>
        </div>
    </div>
</header>

<br>
<br>
<br>
<!-- content YDC begin -->
<section>
    <div class="ydc-content-slide ydc-body" id="app">
        <div class="ydc-flex">
            <!-- left begin -->
            <div class="ydc-column ydc-column-2">
                <div class="ydc-menu">
                    <ul>
                        <li class="ydc-menu-item">
                            <a href="/Blog/personalCenter"><i class="ydc-icon ydc-icon-home fl"></i>首页</a>
                        </li>
                        <li class="ydc-menu-item">
                            <a href="/Blog/publishDownload"><i class="ydc-icon ydc-icon-find fl"></i>上传资源</a>
                        </li>
                        <li class="ydc-menu-item">
								<span class="ydc-menu-sub-title">
									<i class="ydc-icon ydc-icon-file fl"></i>管理
								</span>
                            <ul>
                                <li>
                                    <a href="/Blog/blogsControl">博客管理</a>
                                </li>
                                <li>
                                    <a href="/Blog/downloadControl">资源管理</a>
                                </li>
                                <li>
                                    <a href="/Blog/columnControl">专栏管理</a>
                                </li>
                            </ul>
                        </li>
                        <li class="ydc-menu-item">
								<span class="ydc-menu-sub-title">
									<i class="ydc-icon ydc-icon-record fl"></i>数据
								</span>
                            <ul>
                                <li>
                                    <a href="subscribe.html">订阅数据</a>
                                </li>
                                <li>
                                    <a href="content-data.html">内容数据</a>
                                </li>
                            </ul>
                        </li>
                        <li class="ydc-menu-item">
								<span class="ydc-menu-sub-title">
									<i class="ydc-icon ydc-icon-set fl"></i>设置
								</span>
                            <ul>
                                <li>
                                    <a href="/Blog/userInfo" class="active">账号信息</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- left end -->
            <!-- right begin -->
            <div class="ydc-column ydc-column-8">
                <div class="ydc-release-content">
                    <div class="ydc-tabPanel ydc-tabPanel-release">
                        <div class="ydc-release-tab-head">
                            <ul>
                                <li class="hit">帐号设置</li>
                            </ul>
                        </div>
                        <div class="ydc-panes">
                            <div class="ydc-pane ydc-pane-clear" style="display:block;">
                                <div class="ydc-reg-form-group clearfix">
                                    <label>用户名：</label>
                                    <div class="ydc-reg-form-input">
                                        <label>
                                            <input type="text" v-model="user.username">
                                        </label>
                                    </div>
                                </div>

                                <div class="ydc-reg-form-group clearfix">
                                    <label>用户头像：</label>
                                    <div class="ydc-reg-form-input">
<!--                                        <div class="ydc-reg-form-text ydc-reg-form-user-logo">-->
<!--                                            <img :src="'/Blog/' + user.headshot" alt="">-->
<!--                                        </div>-->
                                        <label>
                                            <input id="headshot" type="file" value="选择图片">
                                        </label>
                                    </div>
                                </div>
                                <div class="ydc-reg-form-group clearfix">
                                    <label>用户简介：</label>
                                    <div class="ydc-reg-form-input">
                                        <label>
                                            <input type="text" v-model="user.introduction">
                                        </label>
                                    </div>
                                </div>

                                <div class="ydc-reg-form-group clearfix">
                                    <label>入站时间：</label>
                                    <div class="ydc-reg-form-input">
                                        <label>{{user.registeredTime}}</label>
                                    </div>
                                </div>

                                <div class="ydc-reg-form-group clearfix">
                                    <label>联系手机：</label>
                                    <div class="ydc-reg-form-input">
                                        <label>
                                            <input type="text" v-model="user.tel">
                                        </label>
                                    </div>
                                </div>
                                <div class="ydc-reg-form-group clearfix">
                                    <label>邮箱：</label>
                                    <div class="ydc-reg-form-input">
                                        <label>
                                            <input type="text" v-model="user.email">
                                        </label>
                                    </div>
                                </div>

                                <div class="ydc-reg-form-group clearfix" style="margin-top:40px;">
                                    <div class="ydc-reg-form-button" style="margin-left:255px;">
                                        <a class="btn fl" @click="updateUserInfo">修改</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- right end -->
        </div>
    </div>

</section>
<!-- content YDC end -->

<footer class="grid-footer">
    <div class="footer-fixed">
        <div class="copyright">
            <div class="info">
                <div class="contact">
                    <a href="javascript:void(0)" class="github" target="_blank"><i class="fa fa-github"></i></a>
                    <a href="#" class="qq" target="_blank" ><i class="fa fa-qq"></i></a>
                    <a href="#" class="email" target="_blank" ><i class="fa fa-envelope"></i></a>
                    <a href="javascript:void(0)" class="weixin"><i class="fa fa-weixin"></i></a>
                </div>
                <p class="mt05">
                    Copyright &copy; 2019-2020 ZQ博客 All Rights Reserved V.3.1.3 Power by ZQ博客
                </p>
            </div>
        </div>
    </div>
</footer>
<script src="/Blog/static/userSide/layui/layui.js"></script>
<script src="/Blog/static/userSide/js/yss/gloable.js"></script>
<script src="/Blog/static/userSide/js/plugins/nprogress.js"></script>
<script src="/Blog/static/userSide/js/pagecomment.js"></script>

<script src="/Blog/static/adminSide/js/jquery-1.11.0.min.js"></script>
<script src="/Blog/static/userSide/js/axios.min.js"></script>
<script src="/Blog/static/userSide/js/vue.js"></script>

<script>
    new Vue({
        el: "#app",
        data() {
            return {
                user:{}
            }
        },
        mounted() {
            this.getUser();
        },
        methods: {
            getUser() {
                var _this = this;
                axios({
                    method: "post",
                    url: "http://localhost:8080/Blog/selectUserByUid" ,
                    data: "uid="+ getCookie("uid")
                }).then(function (resp) {
                    console.log(resp);
                    _this.user = resp.data;
                });
            },
            updateUserInfo(){
                var _this = this;
                var image = document.getElementById("headshot").files[0]
                // console.log(imag)
                var forms = new FormData();
                forms.append('uid', getCookie("uid"));
                forms.append('headshotFile', image);
                axios({
                    method: "post",
                    url: "http://localhost:8080/Blog/updateHeadshot",
                    headers: {
                        'Content-Type': 'multipart/form-data'
                    },
                    data: forms
                }).then(function (resp) {
                    console.log(resp.data);
                    _this.user.headshot = resp.data;
                    axios({
                        method: "post",
                        url: "http://localhost:8080/Blog/updateUserInfoByUser",
                        data: _this.user
                    }).then(function (resp) {
                    })
                })
            }
        }
    })

    //获取当前时间
    function showTime() {
        var now = new Date();
        var year = now.getFullYear(); //得到年份
        var month = now.getMonth() + 1;//得到月份
        var date = now.getDate();//得到日期
        var time = year + "-" + month + "-" + date;
        return time;
    }
    function getCookie(cname)
    {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i=0; i<ca.length; i++)
        {
            var c = ca[i].trim();
            if (c.indexOf(name)==0) return c.substring(name.length,c.length);
        }
        return "";
    }
</script>



<script>
    NProgress.start();
</script>


</body>
</html>
